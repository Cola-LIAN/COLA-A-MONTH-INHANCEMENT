(this["webpackJsonpmusic-player-frontend"]=this["webpackJsonpmusic-player-frontend"]||[]).push([[0],{44:function(e,t,n){e.exports=n(64)},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(11),o=n.n(r),s=n(12),c=(n(54),n(55),n(56),n(29)),u=n(30),l=n(40),d=n(31),m=n(41),p=n(35),f=n.n(p),h=n(36),v=n.n(h),E=n(75),S=n(37),I=n.n(S),C=n(34),w=n.n(C),g=n(33),L=n.n(g),M=(n(57),n(19)),N=n.n(M),O=function(){return function(e){var t,n;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(fetch(window.location.origin+"/mongo"));case 2:return t=a.sent,a.next=5,N.a.awrap(t.json());case 5:n=a.sent,e({type:"SHOW_MUSIC_LIST",list:n});case 7:case"end":return a.stop()}}))}},y=(n(59),function(e){var t=e.cid;return i.a.createElement("div",{className:"hamburgerBottom"},e.children,i.a.createElement("div",{className:"hamburgerTop",id:t}))}),b=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).regulateTime=function(e){var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(14,5)},e.produceNewSongIndex=function(t){var n,a=e.props.musicList.length,i=e.props.musicList.indexOf(e.props.currentMusic);return"nextIcon"===t?n=i!==a-1?i+1:0:"previousIcon"===t&&(n=0!==i?i-1:a-1),n},e.startSliderUpdateLoop=function(){var t=setInterval((function(){e.setState({currentTime:e.audio.currentTime})}),1e3);e.setState({sliderUpdateLoopId:t})},e.stopSliderUpdateLoop=function(){clearInterval(e.state.timeLoop)},e.resetSliderStatus=function(){e.setState({currentTime:0})},e.handleClick=function(t){if("playIcon"===t)e.switchPlayButton(),e.audio.play(),e.startSliderUpdateLoop();else if("pauseIcon"===t)e.switchPlayButton(),e.audio.pause(),e.stopSliderUpdateLoop();else if("previousIcon"===t||"nextIcon"===t){var n=e.produceNewSongIndex(t);e.props.switchMusic(n),e.stopSliderUpdateLoop(),e.resetSliderStatus(),e.audio.addEventListener("loadedmetadata",(function(){e.startSliderUpdateLoop(),e.audio.play(),e.setState({isPaused:e.audio.paused})}),!1)}else"favoriteIcon"===t&&e.setState({favoriteIconColor:"red"===e.state.favoriteIconColor?"#000":"red"})},e.handleChange=function(t,n){e.setState({currentTime:n})},e.handleMouseDown=function(){e.stopSliderUpdateLoop(),e.audio.pause()},e.handleMouseUp=function(){e.audio.currentTime=e.state.currentTime,e.state.isPaused||(e.audio.play(),e.startSliderUpdateLoop())},e.switchPlayButton=function(){e.setState({isPaused:!e.state.isPaused})},e.state={currentTime:0,totalTime:0,isPaused:!0,sliderUpdateLoopId:0,favoriteIconColor:"#000"},e.audio=null,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.audio=this.audioDom.current,this.audio.addEventListener("loadedmetadata",(function(){e.setState({totalTime:Math.ceil(e.audio.duration),isPaused:e.audio.paused})}),!1),this.props.showMusicList(),this.audio.addEventListener("ended",(function(){e.handleClick("nextIcon")}))}},{key:"render",value:function(){var e=this;return this.audioDom=Object(a.createRef)(),i.a.createElement("div",{className:"playerFrame"},i.a.createElement("audio",{src:this.props.currentMusic.source,ref:this.audioDom}),i.a.createElement("div",{className:"songInfo"},i.a.createElement("div",{className:"songCoverContainer"},i.a.createElement("div",{className:"songCover"})),i.a.createElement("div",{className:"TextInfoContainer"},i.a.createElement("span",{id:"songTitle"},this.props.currentMusic.name," -",this.props.currentMusic.artist),i.a.createElement("div",null,i.a.createElement(E.a,{id:"linearProgressBar",max:this.state.totalTime,value:this.state.currentTime,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),i.a.createElement("span",{id:"timeProgress"},this.regulateTime(this.state.currentTime),"/",this.props.currentMusic.time)))),i.a.createElement("div",{className:"playIcon",onClick:function(t){return e.handleClick(t.target.id)}},i.a.createElement(L.a,{id:"favoriteIcon",style:{color:this.state.favoriteIconColor}}),i.a.createElement(y,{cid:"previousIcon"},i.a.createElement(w.a,{id:"previous"})),this.state.isPaused?i.a.createElement(y,{cid:"playIcon"},i.a.createElement(f.a,{id:"play"})):i.a.createElement(y,{cid:"pauseIcon"},i.a.createElement(v.a,{id:"pause"})),i.a.createElement(y,{cid:"nextIcon"},i.a.createElement(I.a,{id:"next"}))))}}]),t}(a.Component),T=Object(s.b)((function(e){return{currentMusic:e.currentMusic,musicList:e.musicList}}),(function(e){return{showMusicList:function(){e(O())},switchMusic:function(t){e({type:"SWITCH_MUSIC",newIndex:t})}}}))(b),_=(n(61),n(62),function(e){var t=e.song,n=e.onClick,a=e.fontSize,r=t.name,o=t.artist,s=t.album,c=t.time;return i.a.createElement("div",{className:"listItem",style:{fontSize:a},onClick:n},i.a.createElement("div",{className:"container titleContainer"},r),i.a.createElement("div",{className:"container artistContainer"},o),i.a.createElement("div",{className:"container albumContainer"},s),i.a.createElement("div",{className:"container timeContainer"},c))}),U=Object(s.b)((function(e){return{wholeState:e}}),(function(e){return{showMusicList:function(){e(O())},pickMusic:function(t){e(function(e){return{type:"PICK_MUSIC",item:e}}(t))}}}))((function(e){var t=e.wholeState,n=e.showMusicList,r=e.pickMusic;Object(a.useEffect)(n,[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"songListTitle"},i.a.createElement("strong",null,"Song List")),i.a.createElement(_,{song:{name:"Name",time:"Time",artist:"Artist",album:"Album"},fontSize:"17px"}),t.musicList.map((function(e,t){return i.a.createElement(_,{key:t,className:e,song:e,fontSize:"5px",onClick:function(){r(e)}})})))})),x=n(76),j=(n(63),function(){return i.a.createElement("div",{className:"userInfo"},i.a.createElement(x.a,{id:"avatar",alt:"C Sharp",src:"avatar1.jpg"}),i.a.createElement("label",{className:"userName"},"Cola LIAN"))}),P=function(){return i.a.createElement("div",{className:"frame"},i.a.createElement("div",{className:"header"}),i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"accountInfo"},i.a.createElement(j,null)),i.a.createElement("div",{className:"songList"},i.a.createElement(U,null))),i.a.createElement(T,null))},k=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(17),B=n(38),W=n(39),z=n(20),A={musicList:[],currentMusic:{},isPlay:!1,currentIndex:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;if("SHOW_MUSIC_LIST"===t.type)return Object(z.a)({},e,{musicList:t.list,currentMusic:t.list[0]});if("PICK_MUSIC"===t.type)return Object(z.a)({},e,{currentMusic:t.item});if("SWITCH_MUSIC"===t.type){var n=e.musicList.filter((function(n){return e.musicList.indexOf(n)===t.newIndex})),a=Object(W.a)(n,1),i=a[0];return Object(z.a)({},e,{currentMusic:i})}return e},X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,R=Object(D.c)(H,X(Object(D.a)(B.a)));o.a.render(i.a.createElement(s.a,{store:R},i.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.e2a727ca.chunk.js.map